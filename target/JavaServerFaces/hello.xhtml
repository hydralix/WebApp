<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	

<h:head>
	<title>JSF 2.0 Hello World</title>

</h:head>
<h:body>

	<h:form id="f2">
		<f:facet name="last">
			<h:outputStylesheet library="default" name="css/table-style.css" />
		</f:facet>
	    <h:outputStylesheet library="css" name="css/noBorders.css"/>
		<p:menubar>
	        <p:menuitem value="Добавить запись" onclick="dlg.show()"  icon="ui-icon-document" />
	    </p:menubar>

		<p:dialog id="dialogAdd" header="Добавить запись" widgetVar="dlg" resizable="false" hideEffect="explode">
		  <p:focus context="dialogAdd"/>   
			<h:panelGrid columns="2" border="">
	
			    <h:outputLabel for="street" value="Улица: " />
			    <p:inputText id="street" value="#{order.street}" required="true" label="Street"  />
			
			    <h:outputLabel for="house" value="Дом: " />
			    <p:inputText id="house" value="#{order.house}" required="true" label="House"/>
	
				<p:commandButton value="Добавить" action="#{order.addAction()}" update="f2:tableOrder" style="font-family:Palatino;font-style:italic;font-size: 11pt;"/>	

			</h:panelGrid>	
		</p:dialog>
		
		<p:dataTable value="#{order.orderList}" 
				var="o"
    			id = "tableOrder"
    			editable="true"
    			emptyMessage="Нету ни одной записи..."
    		>
    		
	       <p:column headerText="Street" style="width:30%" sortBy="#{o.street}">  
	       	<f:facet name="header">Улица</f:facet>
	            <p:cellEditor>  
	                <f:facet name="output">  
	                    <h:outputText value="#{o.street}"/>  
	                </f:facet>  
	                <f:facet name="input">  
	                    <p:inputText value="#{o.street}" style="width:100%"/>  
	                </f:facet>  
	            </p:cellEditor>  
	        </p:column> 
 
 	       <p:column headerText="House" style="width:30%" sortBy="#{o.house}">  
	       	<f:facet name="header">Дом</f:facet>
	            <p:cellEditor>  
	                <f:facet name="output">  
	                    <h:outputText value="#{o.house}" />  
	                </f:facet>  
	                <f:facet name="input">  
	                    <p:inputText value="#{o.house}" style="width:100%"/>  
	                </f:facet>  
	            </p:cellEditor>  
	        </p:column> 

    		<p:column style="width:8%">  
            	<p:rowEditor />  
            	<p:commandLink styleClass="ui-icon ui-icon-trash" action="#{order.deleteAction(o)}" update="@form" ajax="true" />
        	</p:column>  
 
    		</p:dataTable>
		
	</h:form>
</h:body>
</html>